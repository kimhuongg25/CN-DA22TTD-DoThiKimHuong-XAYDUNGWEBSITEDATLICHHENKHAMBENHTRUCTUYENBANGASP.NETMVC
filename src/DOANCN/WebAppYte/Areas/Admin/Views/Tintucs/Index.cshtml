@model IEnumerable<WebAppYte.Models.Tintuc>

@{
    ViewBag.Title = "Quản lý Tin tức";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAd.cshtml";
}

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />

<style>
    /* ... (Giữ nguyên các CSS cũ của bạn ở trên) ... */

    /* CẬP NHẬT LẠI CSS CHO PHẦN NÚT BẤM (ACTION BUTTONS) */

    /* 1. Container cho nhóm nút: Dùng Flexbox để căn giữa và tạo khoảng cách */
    .action-group {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 8px; /* Khoảng cách giữa các nút */
    }

    /* 2. Style cho từng nút */
    .action-btn {
        width: 36px; /* Tăng kích thước nhẹ */
        height: 36px;
        border-radius: 50%; /* Bo tròn hoàn toàn */
        display: inline-flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        transition: all 0.3s ease;
        border: 1px solid transparent; /* Viền trong suốt */
        box-shadow: 0 2px 5px rgba(0,0,0,0.05); /* Đổ bóng nhẹ */
    }

    /* Màu sắc từng nút */
    .btn-edit {
        background-color: #eef2ff;
        color: #4f46e5;
        border-color: #c7d2fe;
    }

    .btn-detail {
        background-color: #ecfdf5;
        color: #059669;
        border-color: #a7f3d0;
    }

    .btn-delete {
        background-color: #fef2f2;
        color: #dc2626;
        border-color: #fecaca;
    }

    /* Hiệu ứng khi rê chuột */
    .action-btn:hover {
        transform: translateY(-3px); /* Nổi lên trên */
        box-shadow: 0 5px 10px rgba(0,0,0,0.1);
        text-decoration: none;
    }

    .btn-edit:hover {
        background-color: #4f46e5;
        color: white;
        border-color: #4f46e5;
    }

    .btn-detail:hover {
        background-color: #059669;
        color: white;
        border-color: #059669;
    }

    .btn-delete:hover {
        background-color: #dc2626;
        color: white;
        border-color: #dc2626;
    }

    /* Ngăn không cho cột hành động bị xuống dòng */
    .col-action {
        white-space: nowrap;
        width: 140px; /* Cố định chiều rộng tối thiểu */
    }
</style>

<div class="container-fluid" style="padding: 0 20px 30px 20px;">

    <div class="page-header">
        <h2 class="page-title"><i class="fas fa-newspaper me-2"></i> Quản lý Tin tức</h2>
        <a href="@Url.Action("Create")" class="btn-add-new">
            <i class="fas fa-plus me-2"></i> Viết bài mới
        </a>
    </div>

    <div class="table-card">
        <div class="table-responsive">
            <table class="table table-custom">
                <thead>
                    <tr>
                        <th width="35%">Bài viết</th>
                        <th width="40%">Mô tả ngắn (Sapo)</th>
                        <th width="15%">Phân loại & Thời gian</th>
                        <th class="text-center col-action">Hành động</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>
                                <div class="news-item">
                                    @if (!string.IsNullOrEmpty(item.Hinhanh))
                                    {
                                        <img src="@item.Hinhanh" class="news-thumb" alt="Thumb" onerror="this.src='https://via.placeholder.com/80x60?text=No+Img'" />
                                    }
                                    else
                                    {
                                        <div class="news-thumb" style="background:#eee; display:flex; align-items:center; justify-content:center;">
                                            <i class="fas fa-image text-muted"></i>
                                        </div>
                                    }
                                    <div>
                                        <span class="news-title" title="@item.Tieude">@item.Tieude</span>
                                    </div>
                                </div>
                            </td>

                            <td>
                                <div class="text-limit" title="@item.Mota">
                                    @(string.IsNullOrEmpty(item.Mota) ? "---" : item.Mota)
                                </div>
                            </td>

                            <td>
                                <span class="category-badge">
                                    @(string.IsNullOrEmpty(item.TheLoai) ? "Chưa phân loại" : item.TheLoai)
                                </span>
                                <span class="date-text">
                                    <i class="far fa-clock me-1"></i>
                                    @(item.Ngaydang.HasValue ? item.Ngaydang.Value.ToString("dd/MM/yyyy HH:mm") : "---")
                                </span>
                            </td>

                            <td class="text-center col-action">
                                <div class="action-group">
                                    <a href="@Url.Action("Edit", new { id=item.IDTintuc })" class="action-btn btn-edit" title="Sửa bài">
                                        <i class="fas fa-pen"></i>
                                    </a>
                                    <a href="@Url.Action("Details", new { id=item.IDTintuc })" class="action-btn btn-detail" title="Xem trước">
                                        <i class="fas fa-eye"></i>
                                    </a>
                                    <a href="@Url.Action("Delete", new { id=item.IDTintuc })" class="action-btn btn-delete" title="Xóa bài">
                                        <i class="fas fa-trash-alt"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        @if (Model.Count() == 0)
        {
            <div class="text-center p-5">
                <i class="far fa-newspaper fa-3x text-muted mb-3"></i>
                <p class="text-muted">Chưa có bài viết nào. Hãy thêm bài viết mới!</p>
            </div>
        }
    </div>
</div>